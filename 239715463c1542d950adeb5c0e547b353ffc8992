{
  "comments": [
    {
      "key": {
        "uuid": "8af72b09_1b415b91",
        "filename": "gensupport/resumable.go",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 5505
      },
      "writtenOn": "2016-07-25T06:09:51Z",
      "side": 1,
      "message": "It seems like this should be called at a lower level so e.g. if there is an error reading the file and we don\u0027t make any requests, we will not log any request traces. Perhaps do it in doUploadRequest ?",
      "range": {
        "startLine": 143,
        "startChar": 7,
        "endLine": 143,
        "endChar": 11
      },
      "revId": "239715463c1542d950adeb5c0e547b353ffc8992",
      "serverId": "c958e1eb-c711-3e17-a1d0-c94d35b2e5aa",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8af72b09_fbc0eff9",
        "filename": "gensupport/send.go",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 5505
      },
      "writtenOn": "2016-07-25T06:09:51Z",
      "side": 1,
      "message": "The documentation for this function is very general (not mentioning cloud trace), but this name parameter is cloud-trace specific, AFAICT. Can you document name in some way, or delete it?\n\nIf you move the Hook call in resumable.go to doUploadRequest, then you will have a request to pass to Hook, and then perhaps you won\u0027t need a name parameter here at all. Is there somewhere else you\u0027re passing name from?",
      "range": {
        "startLine": 18,
        "startChar": 54,
        "endLine": 18,
        "endChar": 65
      },
      "revId": "239715463c1542d950adeb5c0e547b353ffc8992",
      "serverId": "c958e1eb-c711-3e17-a1d0-c94d35b2e5aa",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8af72b09_db4ed3c3",
        "filename": "gensupport/send.go",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 5535
      },
      "writtenOn": "2016-07-25T05:50:08Z",
      "side": 1,
      "message": "FYI this is the hook that will be added in the cloud/trace package:\n\nfunc init() {\n\tinnerHook \u003d gensupport.Hook\n\tgensupport.Hook \u003d requestHook\n}\n\nfunc requestHook(ctx context.Context, req *http.Request, name string) func(resp **http.Response) {\n\tinnerReturnHook :\u003d innerHook(ctx, req, name)\n\tvar span *Span\n\tif req !\u003d nil {\n\t\tspan \u003d FromContext(ctx).NewRemoteChild(req)\n\t} else {\n\t\tspan \u003d FromContext(ctx).NewChild(name)\n\t}\n\treturn func(resp **http.Response) {\n\t\tif resp !\u003d nil \u0026\u0026 *resp !\u003d nil {\n\t\t\tspan.Finish(WithResponse(*resp))\n\t\t} else {\n\t\t\tspan.Finish()\n\t\t}\n\t\tinnerReturnHook(resp)\n\t}\n}",
      "revId": "239715463c1542d950adeb5c0e547b353ffc8992",
      "serverId": "c958e1eb-c711-3e17-a1d0-c94d35b2e5aa",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8af72b09_5b3be31e",
        "filename": "gensupport/send.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 5505
      },
      "writtenOn": "2016-07-25T06:09:51Z",
      "side": 1,
      "message": "Do you actually need a double pointer here?",
      "range": {
        "startLine": 21,
        "startChar": 18,
        "endLine": 21,
        "endChar": 33
      },
      "revId": "239715463c1542d950adeb5c0e547b353ffc8992",
      "serverId": "c958e1eb-c711-3e17-a1d0-c94d35b2e5aa",
      "unresolved": false
    }
  ]
}