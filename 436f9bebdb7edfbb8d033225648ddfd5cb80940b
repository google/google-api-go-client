{
  "comments": [
    {
      "key": {
        "uuid": "e518e2be_05a6b2a8",
        "filename": "iterator/iterator.go",
        "patchSetId": 7
      },
      "lineNbr": 88,
      "author": {
        "id": 5505
      },
      "writtenOn": "2016-08-26T01:21:00Z",
      "side": 1,
      "message": "AKAICT it\u0027s critical for the correctness of this code that the iterator stores the error returned by next and supplies it to the next invocation of next (e.g. so that we can distinguish between [an empty token because we haven\u0027t started] vs [an empty token because we\u0027re done]). Rather than relying on that, can you store the error in PageInfo? You could still return it so that the iterator can return it to the caller, but you wouldn\u0027t need to take it as a parameter here.  It also looks like Pager could rely on PageInfo.err instead of using its own err field.\n\nThis is all a bit subtle, though, so maybe there\u0027s something I\u0027ve missed. If you do in fact need to store the error state outside of PageInfo, can you please at least document more explicitly that callers of next *must* pass the error value that next previously returned (if any)?",
      "range": {
        "startLine": 88,
        "startChar": 3,
        "endLine": 88,
        "endChar": 89
      },
      "revId": "436f9bebdb7edfbb8d033225648ddfd5cb80940b",
      "serverId": "c958e1eb-c711-3e17-a1d0-c94d35b2e5aa",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e518e2be_e5955632",
        "filename": "iterator/iterator.go",
        "patchSetId": 7
      },
      "lineNbr": 88,
      "author": {
        "id": 5505
      },
      "writtenOn": "2016-08-26T01:21:00Z",
      "side": 1,
      "message": "takes",
      "range": {
        "startLine": 88,
        "startChar": 6,
        "endLine": 88,
        "endChar": 10
      },
      "revId": "436f9bebdb7edfbb8d033225648ddfd5cb80940b",
      "serverId": "c958e1eb-c711-3e17-a1d0-c94d35b2e5aa",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e518e2be_659b2661",
        "filename": "iterator/iterator.go",
        "patchSetId": 7
      },
      "lineNbr": 174,
      "author": {
        "id": 5505
      },
      "writtenOn": "2016-08-26T01:21:00Z",
      "side": 1,
      "message": "if p.pageInfo.nextCalled {\n\tp.err \u003d errMixed\n}\nif p.err !\u003d nil {\n\treturn \"\", p.err\n}\n\n?",
      "range": {
        "startLine": 168,
        "startChar": 1,
        "endLine": 174,
        "endChar": 2
      },
      "revId": "436f9bebdb7edfbb8d033225648ddfd5cb80940b",
      "serverId": "c958e1eb-c711-3e17-a1d0-c94d35b2e5aa",
      "unresolved": false
    }
  ]
}